## [SDOI2009]HH的项链

[https://ac.nowcoder.com/acm/problem/20325](https://ac.nowcoder.com/acm/problem/20325)

题目描述：

给出一个长度为N的项链，项链上每个位置都有一个贝壳。现在有M个查询，每次查询给出左端点L和右端点R，询问区间[L,R]中不同的贝壳个数。

解题思路：

对于每个询问，用set（红黑树实现）来统计区间[L,R]中不同的贝壳数目，用数组sum[i]来记录区间[1,i]中不同的贝壳数目。

- 对于每次询问，遍历区间[L,R]中的每个贝壳，如果该贝壳还未出现在区间[L,R]中，则将其加入set中，并更新区间[L,R]中不同的贝壳数目。如果该贝壳已经出现过，则直接跳过不做操作。
- 区间[L,R]中不同的贝壳数目即为set的大小。
- 由于询问次数较多，每次都遍历一遍区间计算较慢，因此我们需要预处理sum数组，使得sum[i]表示区间[1,i]中不同的贝壳数目，这样对于每个询问，我们只需要用sum[R]-sum[L-1]来计算[L,R]中不同的贝壳数目即可。

时间复杂度：O(NlogN+MlogN)